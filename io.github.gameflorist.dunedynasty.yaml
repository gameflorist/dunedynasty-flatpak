app-id: io.github.gameflorist.dunedynasty
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk
command: dunedynasty
finish-args:
  - --socket=wayland
  - --socket=fallback-x11
  - --share=ipc
  - --share=network
  - --socket=pulseaudio
  - --filesystem=~/.config/dunedynasty/:create
cleanup:
- "/include"
- "/lib/pkgconfig"
- "/man"
- "/share/doc"
- "/share/gtk-doc"
- "/share/man"
- "/share/pkgconfig"
- "*.la"
- "*.a"
modules:
- name: dunedynasty-appdata
  buildsystem: simple
  build-commands: []
  sources:
    - type: file
      path: io.github.gameflorist.dunedynasty.png
    - type: file
      path: io.github.gameflorist.dunedynasty.metainfo.xml
    - type: file
      path: io.github.gameflorist.dunedynasty.desktop
  post-install:
    - install -D -m 644 -t $FLATPAK_DEST/share/icons/hicolor/512x512/apps/ io.github.gameflorist.dunedynasty.png
    # - install -D -m 644 -t $FLATPAK_DEST/share/icons/hicolor/scalable/apps/ io.github.gameflorist.dunedynasty.svg
    - install -D -m 644 -t $FLATPAK_DEST/share/metainfo/ io.github.gameflorist.dunedynasty.metainfo.xml
    - desktop-file-install -m 644 --dir=$FLATPAK_DEST/share/applications/ io.github.gameflorist.dunedynasty.desktop
- name: allegro5
  buildsystem: cmake
  builddir: true
  sources:
  - type: archive
    sha256: 2ef9f77f0b19459ea2c7645cc4762fc35c74d3d297bfc38d8592307757166f05
    url: https://github.com/liballeg/allegro5/releases/download/5.2.10.1/allegro-5.2.10.1.tar.gz
- name: enet
  buildsystem: autotools
  sources:
  - type: archive
    sha256: 2a8a0c5360d68bb4fcd11f2e4c47c69976e8d2c85b109dd7d60b1181a4f85d36
    url: http://enet.bespin.org/download/enet-1.3.18.tar.gz
- shared-modules/linux-audio/fluidsynth2.json
- shared-modules/libmad/libmad.json
- name: dunedynasty
  builddir: true
  buildsystem: cmake
  sources:
  - type: archive
    sha256: 43d113541acfe3435e5bc740371f3cd3a25bb7a1adf4e7f9024fda63c9487844
    url: https://github.com/gameflorist/dunedynasty/archive/refs/tags/v1.6.3.tar.gz
